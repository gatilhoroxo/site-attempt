
<script>
// Navigation Sidebar - Gerencia comportamento da sidebar (desktop/mobile)
(function() {
  const sidebar = document.getElementById('sidebar');
  const sidebarToggle = document.getElementById('sidebar-toggle');
  const body = document.body;
  
  // Verificar estado salvo da sidebar (padrão: collapsed)
  const sidebarState = localStorage.getItem('sidebarCollapsed');
  if (sidebarState !== 'false') {
    sidebar.classList.add('collapsed');
    body.classList.add('sidebar-collapsed');
  } else {
    body.classList.remove('sidebar-collapsed');
  }
  
  // Remove no-transition class after initial state is set
  requestAnimationFrame(() => {
    body.classList.remove('no-transition');
  });
  
  sidebarToggle.addEventListener('click', () => {
    // Comportamento condicional: desktop vs mobile
    if (window.innerWidth <= 768) {
      // Mobile: toggle mobile-open apenas
      sidebar.classList.toggle('mobile-open');
    } else {
      // Desktop: toggle collapsed
      sidebar.classList.toggle('collapsed');
      body.classList.toggle('sidebar-collapsed');
      
      // Salvar estado
      localStorage.setItem('sidebarCollapsed', sidebar.classList.contains('collapsed'));
    }
  });
  
  // Atualizar sidebar ao redimensionar janela
  window.addEventListener('resize', () => {
    if (window.innerWidth <= 768) {
      // Mobile: remover classes desktop e garantir mobile-open fechado por padrão
      sidebar.classList.remove('collapsed');
      body.classList.remove('sidebar-collapsed');
    } else {
      // Desktop: remover mobile-open e restaurar estado salvo
      sidebar.classList.remove('mobile-open');
      const sidebarState = localStorage.getItem('sidebarCollapsed');
      if (sidebarState === 'true') {
        sidebar.classList.add('collapsed');
        body.classList.add('sidebar-collapsed');
      }
    }
  });
  
  // Fechar sidebar ao clicar em link (mobile)
  document.querySelectorAll('.sidebar a').forEach(link => {
    link.addEventListener('click', () => {
      if (window.innerWidth <= 768) {
        sidebar.classList.remove('mobile-open');
      }
    });
  });
})();

</script>